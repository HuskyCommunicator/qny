# å‰ç«¯ç™»å½•é—®é¢˜ä¿®å¤è¯´æ˜

## ğŸ” é—®é¢˜åˆ†æ

### é—®é¢˜æ ¹æº
1. **æ¥å£ä¸åŒ¹é…**: å‰ç«¯è°ƒç”¨ `/auth/login` æ¥å£ï¼Œä½†å‘é€çš„æ˜¯JSONæ ¼å¼æ•°æ®
2. **åç«¯æœŸæœ›**: `/auth/login` æ¥å£æœŸæœ› `OAuth2PasswordRequestForm` æ ¼å¼ï¼ˆè¡¨å•æ•°æ®ï¼‰
3. **422é”™è¯¯**: æ•°æ®æ ¼å¼ä¸åŒ¹é…å¯¼è‡´ `Unprocessable Entity` é”™è¯¯

### åç«¯æ¥å£è¯´æ˜
- `/auth/login` - æœŸæœ›è¡¨å•æ•°æ® (`application/x-www-form-urlencoded`)
- `/auth/user/login` - æœŸæœ›JSONæ•°æ® (`application/json`)

## âœ… ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä½¿ç”¨è¡¨å•æ•°æ®æ ¼å¼ï¼ˆæ¨èï¼‰
ä¿®æ”¹å‰ç«¯å‘é€è¡¨å•æ•°æ®æ ¼å¼ï¼ŒåŒ¹é… `/auth/login` æ¥å£ï¼š

```javascript
// src/api/user.js
export const loginAPI = (data) => {
  return request({
    url: API.USER.LOGIN,
    method: "post",
    data: new URLSearchParams({
      username: data.username,
      password: data.password
    }),
    headers: {
      "Content-Type": "application/x-www-form-urlencoded",
    },
  });
};
```

### æ–¹æ¡ˆ2: ä½¿ç”¨JSONæ¥å£
ä¿®æ”¹APIé…ç½®ä½¿ç”¨ `/auth/user/login` æ¥å£ï¼š

```javascript
// src/api/api.js
LOGIN: baseURL + "/auth/user/login", // ä½¿ç”¨JSONæ¥å£
```

## ğŸ”§ å·²ä¿®å¤çš„é—®é¢˜

1. **APIé…ç½®**: æ·»åŠ äº† `baseURL` å¯¼å‡ºï¼Œä¿®å¤axiosé…ç½®é—®é¢˜
2. **Content-Type**: ç§»é™¤äº†axiosé»˜è®¤çš„ `Content-Type`ï¼Œé¿å…ä¸è¯·æ±‚æ‹¦æˆªå™¨å†²çª
3. **æ•°æ®æ ¼å¼**: ä¿®æ”¹ç™»å½•è¯·æ±‚ä½¿ç”¨è¡¨å•æ•°æ®æ ¼å¼

## ğŸ§ª æµ‹è¯•éªŒè¯

### ä½¿ç”¨curlæµ‹è¯•è¡¨å•æ ¼å¼ç™»å½•
```bash
curl -X POST http://116.62.231.58:8000/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=test&password=password123"
```

### ä½¿ç”¨curlæµ‹è¯•JSONæ ¼å¼ç™»å½•
```bash
curl -X POST http://116.62.231.58:8000/auth/user/login \
  -H "Content-Type: application/json" \
  -d '{"username": "test", "password": "password123"}'
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

1. âœ… ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
2. âœ… æ£€æŸ¥APIåœ°å€é…ç½®æ­£ç¡®
3. âœ… éªŒè¯æ•°æ®æ ¼å¼åŒ¹é…æ¥å£æœŸæœ›
4. âœ… æµ‹è¯•ç™»å½•åŠŸèƒ½
5. âœ… æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒCORSé…ç½®

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. 422é”™è¯¯ä»ç„¶å­˜åœ¨
- æ£€æŸ¥è¯·æ±‚å¤´ `Content-Type` æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ•°æ®æ ¼å¼æ˜¯å¦åŒ¹é…æ¥å£æœŸæœ›
- æŸ¥çœ‹æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ç½‘ç»œè¯·æ±‚è¯¦æƒ…

### 2. CORSé”™è¯¯
- æ£€æŸ¥åç«¯CORSé…ç½®
- ç¡®è®¤å‰ç«¯åŸŸååœ¨åç«¯å…è®¸åˆ—è¡¨ä¸­

### 3. ç½‘ç»œè¿æ¥é—®é¢˜
- æ£€æŸ¥APIåœ°å€æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æœåŠ¡å™¨é˜²ç«å¢™è®¾ç½®
- éªŒè¯ç½‘ç»œè¿é€šæ€§

## ğŸ“ è°ƒè¯•å»ºè®®

1. **æµè§ˆå™¨å¼€å‘è€…å·¥å…·**: æŸ¥çœ‹ç½‘ç»œè¯·æ±‚è¯¦æƒ…
2. **åç«¯æ—¥å¿—**: æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
3. **Postmanæµ‹è¯•**: ä½¿ç”¨PostmanéªŒè¯æ¥å£å¯ç”¨æ€§
4. **é€æ­¥è°ƒè¯•**: ä»ç®€å•è¯·æ±‚å¼€å§‹ï¼Œé€æ­¥æ·»åŠ å¤æ‚åŠŸèƒ½
